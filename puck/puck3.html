<html>
 <head>
    <!-- see https://tonejs.github.io -->
    <script src="https://unpkg.com/@webcomponents/webcomponentsjs@^2/webcomponents-bundle.js"></script>
    <script src="https://unpkg.com/tone"></script>
    <script src="https://unpkg.com/@tonejs/ui"></script>
    <script src="https://www.puck-js.com/puck.js"></script>

    <script>
        const synth = new Tone.AMSynth().toMaster();
        var prev_button = 0;
        var button = 0;

        function getButtonValue() {
            Puck.eval("BTN.read()", function(v) {
                button = v;
                setTimeout(function() { getButtonValue(); }, 250);
            });
        }

    </script>
 </head>
 <body>
    Press the button on the puck.
    <script> while (true) {
        getButtonValue();
        console.log(button);
        if (prev_button < button) {
            synth.triggerAttack('C4');
        }
        else if (button < prev_button) {
            synth.triggerRelease(); 
        }
    }</script>
</body>
</html>
