<html>
 <head>
    <!-- see https://tonejs.github.io -->
    <script src="https://unpkg.com/@webcomponents/webcomponentsjs@^2/webcomponents-bundle.js"></script>
    <script src="https://unpkg.com/tone"></script>
    <script src="https://unpkg.com/@tonejs/ui"></script>
    <script src="https://www.puck-js.com/puck.js"></script>

    <script>
        const synth = new Tone.AMSynth().toMaster();
        var button = false;
        var b0, b1;

        function getButtonValue() {
            Puck.eval("BTN.read()", function(v) { button = v; });
            console.log(button);
            return button;
        }
        setInterval(function loop() {
            b0 = button;
            b1 = getButtonValue();
            if (not(b0) && b1) {
                synth.triggerAttack('C4');
            }
            else if (b0 && not(b1)) {
                synth.triggerRelease();
            }
        }, 500)
    </script>
 </head>
 <body>
    Press the puck.
</body>
</html>
